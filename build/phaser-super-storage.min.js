!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.PhaserSuperStorage=factory():root.PhaserSuperStorage=factory()}("undefined"!=typeof self?self:this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=6)}([function(module,exports,__webpack_require__){(function(process,global){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
!function(global,factory){module.exports=factory()}(0,function(){"use strict";function objectOrFunction(x){var type=typeof x;return null!==x&&("object"===type||"function"===type)}function isFunction(x){return"function"==typeof x}function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}function useVertxTimer(){return void 0!==vertxNext?function(){vertxNext(flush)}:useSetTimeout()}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}function flush(){for(var i=0;i<len;i+=2){(0,queue[i])(queue[i+1]),queue[i]=void 0,queue[i+1]=void 0}len=0}function then(onFulfillment,onRejection){var parent=this,child=new this.constructor(noop);void 0===child[PROMISE_ID]&&makePromise(child);var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})}else subscribe(parent,child,onFulfillment,onRejection);return child}function resolve$1(object){var Constructor=this;if(object&&"object"==typeof object&&object.constructor===Constructor)return object;var promise=new Constructor(noop);return resolve(promise,object),promise}function noop(){}function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){return TRY_CATCH_ERROR.error=error,TRY_CATCH_ERROR}}function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then$$1){asap(function(promise){var sealed=!1,error=tryThen(then$$1,thenable,function(value){sealed||(sealed=!0,thenable!==value?resolve(promise,value):fulfill(promise,value))},function(reason){sealed||(sealed=!0,reject(promise,reason))},"Settle: "+(promise._label||" unknown promise"));!sealed&&error&&(sealed=!0,reject(promise,error))},promise)}function handleOwnThenable(promise,thenable){thenable._state===FULFILLED?fulfill(promise,thenable._result):thenable._state===REJECTED?reject(promise,thenable._result):subscribe(thenable,void 0,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}function handleMaybeThenable(promise,maybeThenable,then$$1){maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1?handleOwnThenable(promise,maybeThenable):then$$1===TRY_CATCH_ERROR?(reject(promise,TRY_CATCH_ERROR.error),TRY_CATCH_ERROR.error=null):void 0===then$$1?fulfill(promise,maybeThenable):isFunction(then$$1)?handleForeignThenable(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve(promise,value){promise===value?reject(promise,selfFulfillment()):objectOrFunction(value)?handleMaybeThenable(promise,value,getThen(value)):fulfill(promise,value)}function publishRejection(promise){promise._onerror&&promise._onerror(promise._result),publish(promise)}function fulfill(promise,value){promise._state===PENDING&&(promise._result=value,promise._state=FULFILLED,0!==promise._subscribers.length&&asap(publish,promise))}function reject(promise,reason){promise._state===PENDING&&(promise._state=REJECTED,promise._result=reason,asap(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers,length=_subscribers.length;parent._onerror=null,_subscribers[length]=child,_subscribers[length+FULFILLED]=onFulfillment,_subscribers[length+REJECTED]=onRejection,0===length&&parent._state&&asap(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child=void 0,callback=void 0,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function tryCatch(callback,detail){try{return callback(detail)}catch(e){return TRY_CATCH_ERROR.error=e,TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=void 0,failed=void 0;if(hasCallback){if(value=tryCatch(callback,detail),value===TRY_CATCH_ERROR?(failed=!0,error=value.error,value.error=null):succeeded=!0,promise===value)return void reject(promise,cannotReturnOwn())}else value=detail,succeeded=!0;promise._state!==PENDING||(hasCallback&&succeeded?resolve(promise,value):failed?reject(promise,error):settled===FULFILLED?fulfill(promise,value):settled===REJECTED&&reject(promise,value))}function initializePromise(promise,resolver){try{resolver(function(value){resolve(promise,value)},function(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++,promise._state=void 0,promise._result=void 0,promise._subscribers=[]}function validationError(){return new Error("Array Methods must be provided an Array")}function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;return new Constructor(isArray(entries)?function(resolve,reject){for(var length=entries.length,i=0;i<length;i++)Constructor.resolve(entries[i]).then(resolve,reject)}:function(_,reject){return reject(new TypeError("You must pass an array to race."))})}function reject$1(reason){var Constructor=this,promise=new Constructor(noop);return reject(promise,reason),promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function polyfill(){var local=void 0;if(void 0!==global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if("[object Promise]"===promiseToString&&!P.cast)return}local.Promise=Promise$1}var _isArray=void 0;_isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)};var isArray=_isArray,len=0,vertxNext=void 0,customSchedulerFn=void 0,asap=function(callback,arg){queue[len]=callback,queue[len+1]=arg,2===(len+=2)&&(customSchedulerFn?customSchedulerFn(flush):scheduleFlush())},browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&void 0!==process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,queue=new Array(1e3),scheduleFlush=void 0;scheduleFlush=isNode?function(){return function(){return process.nextTick(flush)}}():BrowserMutationObserver?function(){var iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}}():isWorker?function(){var channel=new MessageChannel;return channel.port1.onmessage=flush,function(){return channel.port2.postMessage(0)}}():void 0===browserWindow?function(){try{var vertx=Function("return this")().require("vertx");return vertxNext=vertx.runOnLoop||vertx.runOnContext,useVertxTimer()}catch(e){return useSetTimeout()}}():useSetTimeout();var PROMISE_ID=Math.random().toString(36).substring(2),PENDING=void 0,FULFILLED=1,REJECTED=2,TRY_CATCH_ERROR={error:null},id=0,Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(noop),this.promise[PROMISE_ID]||makePromise(this.promise),isArray(input)?(this.length=input.length,this._remaining=input.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(input),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,validationError())}return Enumerator.prototype._enumerate=function(input){for(var i=0;this._state===PENDING&&i<input.length;i++)this._eachEntry(input[i],i)},Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor,resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING)this._settledAt(entry._state,i,entry._result);else if("function"!=typeof _then)this._remaining--,this._result[i]=entry;else if(c===Promise$1){var promise=new c(noop);handleMaybeThenable(promise,entry,_then),this._willSettleAt(promise,i)}else this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}else this._willSettleAt(resolve$$1(entry),i)},Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===PENDING&&(this._remaining--,state===REJECTED?reject(promise,value):this._result[i]=value),0===this._remaining&&fulfill(promise,this._result)},Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,void 0,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})},Enumerator}(),Promise$1=function(){function Promise(resolver){this[PROMISE_ID]=nextId(),this._result=this._state=void 0,this._subscribers=[],noop!==resolver&&("function"!=typeof resolver&&needsResolver(),this instanceof Promise?initializePromise(this,resolver):needsNew())}return Promise.prototype.catch=function(onRejection){return this.then(null,onRejection)},Promise.prototype.finally=function(callback){var promise=this,constructor=promise.constructor;return promise.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){throw reason})})},Promise}();return Promise$1.prototype.then=then,Promise$1.all=all,Promise$1.race=race,Promise$1.resolve=resolve$1,Promise$1.reject=reject$1,Promise$1._setScheduler=setScheduler,Promise$1._setAsap=setAsap,Promise$1._asap=asap,Promise$1.polyfill=polyfill,Promise$1.Promise=Promise$1,Promise$1})}).call(exports,__webpack_require__(8),__webpack_require__(9))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return StorageUtils}),__webpack_require__.d(__webpack_exports__,"a",function(){return StorageCommand});var StorageCommand,StorageUtils=function(){function StorageUtils(){}return StorageUtils.isLocalStorageSupport=function(){try{if("object"==typeof localStorage)return localStorage.setItem("testingLocalStorage","foo"),localStorage.removeItem("testingLocalStorage"),!0}catch(e){return!1}return!1},StorageUtils.validateMessage=function(data){return data.hasOwnProperty("command")?data:null},StorageUtils.nameSpaceKeyFilter=function(keys,namespace){return keys.filter(function(keyName){return keyName.substring(0,namespace.length)===namespace})},StorageUtils}();!function(StorageCommand){StorageCommand[StorageCommand.init=0]="init",StorageCommand[StorageCommand.setItem=1]="setItem",StorageCommand[StorageCommand.getItem=2]="getItem",StorageCommand[StorageCommand.removeItem=3]="removeItem",StorageCommand[StorageCommand.clear=4]="clear",StorageCommand[StorageCommand.setNamespace=5]="setNamespace",StorageCommand[StorageCommand.length=6]="length",StorageCommand[StorageCommand.key=7]="key",StorageCommand[StorageCommand.error=8]="error"}(StorageCommand||(StorageCommand={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_es6_promise__=__webpack_require__(0),CookieStorage=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_es6_promise__),function(){function CookieStorage(spacedName){void 0===spacedName&&(spacedName=""),this.namespace="",this.forcePromises=!1,this.setNamespace(spacedName)}return Object.defineProperty(CookieStorage.prototype,"length",{get:function(){return null!==this.getNameSpaceMatches()?this.getNameSpaceMatches().length:0},enumerable:!0,configurable:!0}),CookieStorage.prototype.key=function(n){var key=this.getNameSpaceMatches()[n],result=this.getCookiesForNameSpace()[key]||null;return this.forcePromises?this.promisefy(result):result},CookieStorage.prototype.getItem=function(key){var result=this.getCookiesForNameSpace()[key]||null;return this.forcePromises?this.promisefy(result):result},CookieStorage.prototype.setItem=function(key,value){if(document.cookie=encodeURIComponent(this.namespace+key)+"="+encodeURIComponent(value)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.forcePromises)return this.promisefy(null)},CookieStorage.prototype.removeItem=function(key){if(document.cookie=encodeURIComponent(this.namespace+key)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.forcePromises)return this.promisefy(null)},CookieStorage.prototype.clear=function(){var cookies=this.getCookiesForNameSpace();for(var key in cookies)cookies.hasOwnProperty(key)&&this.removeItem(key);if(this.forcePromises)return this.promisefy(null)},CookieStorage.prototype.setNamespace=function(namespace){if(namespace&&(this.namespace=namespace+":",this.reg=new RegExp("^"+this.namespace+"[a-zA-Z0-9]*","g")),this.forcePromises)return this.promisefy(namespace)},CookieStorage.prototype.getNameSpaceMatches=function(){var _this=this;return decodeURIComponent(document.cookie).split("; ").filter(function(val){return null!==val.match(_this.reg)&&val.match(_this.reg).length>0})},CookieStorage.prototype.getCookiesForNameSpace=function(){var _this=this,cookies={};return this.getNameSpaceMatches().forEach(function(cookie){var temp=cookie.replace(_this.namespace,"").split("=");cookies[temp[0]]=temp[1]}),cookies},CookieStorage.prototype.promisefy=function(value){return new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve){resolve(value)})},CookieStorage}());__webpack_exports__.a=CookieStorage},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_es6_promise__=__webpack_require__(0),CordovaStorage=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_es6_promise__),function(){function CordovaStorage(){this.namespace="",this.keys=[]}return Object.defineProperty(CordovaStorage.prototype,"forcePromises",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(CordovaStorage.prototype,"length",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),CordovaStorage.prototype.key=function(n){return this.promisefy(this.keys[n])},CordovaStorage.prototype.getItem=function(key){var _this=this;return new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve,reject){NativeStorage.getItem(_this.namespace+key,function(value){resolve(value)},function(error){2===error.code?resolve(null):reject(error)})})},CordovaStorage.prototype.setItem=function(key,value){var _this=this;if(!(key.length<1))return new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve,reject){NativeStorage.setItem(_this.namespace+key,value,function(){_this.keys.indexOf(key)<0&&(_this.keys.push(key),_this.save()),resolve(null)},function(error){reject(error)})})},CordovaStorage.prototype.removeItem=function(key){var _this=this;return new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve,reject){NativeStorage.remove(_this.namespace+key,function(){var id=_this.keys.indexOf(key);id>=0&&(_this.keys.splice(id,1),_this.save()),resolve(null)},function(error){reject(error)})})},CordovaStorage.prototype.clear=function(){var _this=this;return new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve,reject){for(var counter=0,i=0;i<_this.keys.length;i++)NativeStorage.remove(_this.namespace+_this.keys[i],function(){++counter>=_this.keys.length&&(_this.keys=[],_this.save(),resolve(null))},function(error){reject(error)})})},CordovaStorage.prototype.setNamespace=function(spacedName){var _this=this;return void 0===spacedName&&(spacedName=""),this.namespace=spacedName+":",this.keys=[],new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve){_this.load().then(resolve).catch(resolve)})},CordovaStorage.prototype.promisefy=function(value){return new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve){resolve(value)})},CordovaStorage.prototype.load=function(){var _this=this;return new __WEBPACK_IMPORTED_MODULE_0_es6_promise__.Promise(function(resolve,reject){NativeStorage.getItem(_this.namespace,function(value){_this.keys=JSON.parse(value),resolve(null)},function(error){reject(error)})})},CordovaStorage.prototype.save=function(){NativeStorage.setItem(this.namespace,JSON.stringify(this.keys),function(){},function(){})},CordovaStorage}());__webpack_exports__.a=CordovaStorage},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1_es6_promise__=__webpack_require__(0),LocalStorage=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_es6_promise__),function(){function LocalStorage(spacedName){void 0===spacedName&&(spacedName=""),this.namespace="",this.forcePromises=!1,this.setNamespace(spacedName)}return Object.defineProperty(LocalStorage.prototype,"length",{get:function(){var keys=Object.keys(localStorage);return __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.b.nameSpaceKeyFilter(keys,this.namespace).length},enumerable:!0,configurable:!0}),LocalStorage.prototype.key=function(n){return this.forcePromises?this.promisefy(this._key,arguments):this._key(n)},LocalStorage.prototype._key=function(n){var keys=Object.keys(localStorage),spacedKeys=__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.b.nameSpaceKeyFilter(keys,this.namespace);return localStorage.getItem(spacedKeys[n])},LocalStorage.prototype.getItem=function(key){return this.forcePromises?this.promisefy(this._getItem,arguments):this._getItem(key)},LocalStorage.prototype._getItem=function(key){return localStorage.getItem(this.namespace+key)},LocalStorage.prototype.setItem=function(key,value){return this.forcePromises?this.promisefy(this._setItem,arguments):this._setItem(key,value)},LocalStorage.prototype._setItem=function(key,value){return localStorage.setItem(this.namespace+key,value)},LocalStorage.prototype.removeItem=function(key){return this.forcePromises?this.promisefy(this._removeItem,arguments):this._removeItem(key)},LocalStorage.prototype._removeItem=function(key){return localStorage.removeItem(this.namespace+key)},LocalStorage.prototype.clear=function(){return this.forcePromises?this.promisefy(this._clear,arguments):this._clear()},LocalStorage.prototype._clear=function(){for(var keys=Object.keys(localStorage),spacedKeys=__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.b.nameSpaceKeyFilter(keys,this.namespace),i=0;i<spacedKeys.length;i++)localStorage.removeItem(spacedKeys[i])},LocalStorage.prototype.setNamespace=function(spacedName){return this.forcePromises?this.promisefy(this._setNameSpace,arguments):this._setNameSpace(spacedName)},LocalStorage.prototype._setNameSpace=function(spacedName){spacedName&&(this.namespace=spacedName+":")},LocalStorage.prototype.promisefy=function(value,args){var _this=this;return new __WEBPACK_IMPORTED_MODULE_1_es6_promise__.Promise(function(resolve){resolve(value.apply(_this,args))})},LocalStorage}());__webpack_exports__.a=LocalStorage},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1_es6_promise__=__webpack_require__(0),IframeStorage=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_es6_promise__),function(){function IframeStorage(spacedName,expectedOrigin){void 0===spacedName&&(spacedName=""),void 0===expectedOrigin&&(expectedOrigin="*"),this.namespace="",this.expectedOrigin="",this.storageLength=0,this.enabled=!1,""!==spacedName&&this.setNamespace(spacedName),this.expectedOrigin=expectedOrigin}return Object.defineProperty(IframeStorage.prototype,"forcePromises",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(IframeStorage.prototype,"length",{get:function(){return this.storageLength},enumerable:!0,configurable:!0}),IframeStorage.prototype.init=function(){var _this=this;return this.sendMessage({command:__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.init}).then(function(){_this.enabled=!0})},IframeStorage.prototype.key=function(n){return this.sendMessage({command:__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.key,value:n})},IframeStorage.prototype.getItem=function(key){return this.sendMessage({command:__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.getItem,key:key})},IframeStorage.prototype.setItem=function(key,value){return this.sendMessage({command:__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.setItem,key:key,value:value})},IframeStorage.prototype.removeItem=function(key){return this.sendMessage({command:__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.removeItem,key:key})},IframeStorage.prototype.clear=function(){return this.sendMessage({command:__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.clear})},IframeStorage.prototype.setNamespace=function(spacedName){return this.sendMessage({command:__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.setNamespace,value:spacedName})},IframeStorage.prototype.sendMessage=function(message){var returnedResult,_this=this;message.command===__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.init&&(returnedResult=!1);var messageChannel=new MessageChannel;return new __WEBPACK_IMPORTED_MODULE_1_es6_promise__.Promise(function(resolve,reject){_this.enabled||message.command===__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.init||reject("Messaging not enabled!"),message.command===__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.init&&setTimeout(function(){returnedResult||reject("Unable to get a response in time")},1e3),messageChannel.port1.onmessage=function(event){var receivedMessage=__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.b.validateMessage(event.data);switch(receivedMessage.command===__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.init&&(returnedResult=!0),void 0!==receivedMessage.status&&"ok"===receivedMessage.status||reject(receivedMessage.value),void 0!==receivedMessage.length&&(_this.storageLength=receivedMessage.length),receivedMessage.command){case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.setNamespace:_this.namespace=receivedMessage.value+":",resolve(receivedMessage.value);break;case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.getItem:case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.length:case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.key:resolve(receivedMessage.value);break;case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.setItem:case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.removeItem:case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.clear:case __WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.init:resolve(receivedMessage.status);break;default:reject(receivedMessage.value)}},(_this.enabled||message.command===__WEBPACK_IMPORTED_MODULE_0__Utils_Storage__.a.init)&&window.parent.postMessage(message,_this.expectedOrigin,[messageChannel.port2])})},IframeStorage}());__webpack_exports__.a=IframeStorage},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__StorageAdapters__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_1__Utils_Storage__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__StorageAdapters_CookieStorage__=__webpack_require__(2);__webpack_require__.d(__webpack_exports__,"CookieStorage",function(){return __WEBPACK_IMPORTED_MODULE_2__StorageAdapters_CookieStorage__.a});var __WEBPACK_IMPORTED_MODULE_3__StorageAdapters_CordovaStorage__=__webpack_require__(3);__webpack_require__.d(__webpack_exports__,"CordovaStorage",function(){return __WEBPACK_IMPORTED_MODULE_3__StorageAdapters_CordovaStorage__.a});var __WEBPACK_IMPORTED_MODULE_4__StorageAdapters_LocalStorage__=__webpack_require__(4);__webpack_require__.d(__webpack_exports__,"LocalStorage",function(){return __WEBPACK_IMPORTED_MODULE_4__StorageAdapters_LocalStorage__.a});var __WEBPACK_IMPORTED_MODULE_5__StorageAdapters_IframeStorage__=__webpack_require__(5);__webpack_require__.d(__webpack_exports__,"IframeStorage",function(){return __WEBPACK_IMPORTED_MODULE_5__StorageAdapters_IframeStorage__.a});var PhaserSuperStorage=function(){function PhaserSuperStorage(scene){var _this=this;this.scene=scene,this.scene.sys.settings.isBooted||this.scene.sys.events.once("boot",function(){return _this.boot})}return PhaserSuperStorage.register=function(manager){manager.register("PhaserSuperStorage",PhaserSuperStorage,"storage")},PhaserSuperStorage.prototype.boot=function(){__WEBPACK_IMPORTED_MODULE_1__Utils_Storage__.b.isLocalStorageSupport()?this.setAdapter(new __WEBPACK_IMPORTED_MODULE_0__StorageAdapters__.b):this.setAdapter(new __WEBPACK_IMPORTED_MODULE_0__StorageAdapters__.a),PhaserSuperStorage.nameSpace.length>0&&this.storage.setNamespace(PhaserSuperStorage.nameSpace)},PhaserSuperStorage.prototype.setAdapter=function(storageAdapter){this.storage=storageAdapter,PhaserSuperStorage.nameSpace.length>0&&this.storage.setNamespace(PhaserSuperStorage.nameSpace)},Object.defineProperty(PhaserSuperStorage.prototype,"forcePromises",{get:function(){return this.storage.forcePromises},set:function(forceIt){this.storage.forcePromises=forceIt},enumerable:!0,configurable:!0}),Object.defineProperty(PhaserSuperStorage.prototype,"length",{get:function(){return null===this.storage?0:this.storage.length},enumerable:!0,configurable:!0}),PhaserSuperStorage.prototype.setNamespace=function(namedSpace){if(PhaserSuperStorage.nameSpace=namedSpace,null!==this.storage)return this.storage.setNamespace(namedSpace)},PhaserSuperStorage.prototype.key=function(n){return null===this.storage?"":this.storage.key(n)},PhaserSuperStorage.prototype.getItem=function(key){return null===this.storage?null:this.storage.getItem(key)},PhaserSuperStorage.prototype.setItem=function(key,value){if(null!==this.storage)return this.storage.setItem(key,value)},PhaserSuperStorage.prototype.removeItem=function(key){if(null!==this.storage)return this.storage.removeItem(key)},PhaserSuperStorage.prototype.clear=function(){if(null!==this.storage)return this.storage.clear()},PhaserSuperStorage.nameSpace="",PhaserSuperStorage}();__webpack_exports__.default=PhaserSuperStorage},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__CookieStorage__=__webpack_require__(2);__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_0__CookieStorage__.a});var __WEBPACK_IMPORTED_MODULE_2__LocalStorage__=(__webpack_require__(3),__webpack_require__(4));__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_2__LocalStorage__.a});__webpack_require__(5)},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(g=window)}module.exports=g}])});
//# sourceMappingURL=phaser-super-storage.min.js.map